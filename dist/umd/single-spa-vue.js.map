{"version":3,"file":"single-spa-vue.js","sources":["../../node_modules/.pnpm/css.escape@1.5.1/node_modules/css.escape/css.escape.js","../../src/single-spa-vue.js"],"sourcesContent":["/*! https://mths.be/cssescape v1.5.1 by @mathias | MIT license */\n;(function(root, factory) {\n\t// https://github.com/umdjs/umd/blob/master/returnExports.js\n\tif (typeof exports == 'object') {\n\t\t// For Node.js.\n\t\tmodule.exports = factory(root);\n\t} else if (typeof define == 'function' && define.amd) {\n\t\t// For AMD. Register as an anonymous module.\n\t\tdefine([], factory.bind(root, root));\n\t} else {\n\t\t// For browser globals (not exposing the function separately).\n\t\tfactory(root);\n\t}\n}(typeof global != 'undefined' ? global : this, function(root) {\n\n\tif (root.CSS && root.CSS.escape) {\n\t\treturn root.CSS.escape;\n\t}\n\n\t// https://drafts.csswg.org/cssom/#serialize-an-identifier\n\tvar cssEscape = function(value) {\n\t\tif (arguments.length == 0) {\n\t\t\tthrow new TypeError('`CSS.escape` requires an argument.');\n\t\t}\n\t\tvar string = String(value);\n\t\tvar length = string.length;\n\t\tvar index = -1;\n\t\tvar codeUnit;\n\t\tvar result = '';\n\t\tvar firstCodeUnit = string.charCodeAt(0);\n\t\twhile (++index < length) {\n\t\t\tcodeUnit = string.charCodeAt(index);\n\t\t\t// Note: there’s no need to special-case astral symbols, surrogate\n\t\t\t// pairs, or lone surrogates.\n\n\t\t\t// If the character is NULL (U+0000), then the REPLACEMENT CHARACTER\n\t\t\t// (U+FFFD).\n\t\t\tif (codeUnit == 0x0000) {\n\t\t\t\tresult += '\\uFFFD';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is in the range [\\1-\\1F] (U+0001 to U+001F) or is\n\t\t\t\t// U+007F, […]\n\t\t\t\t(codeUnit >= 0x0001 && codeUnit <= 0x001F) || codeUnit == 0x007F ||\n\t\t\t\t// If the character is the first character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039), […]\n\t\t\t\t(index == 0 && codeUnit >= 0x0030 && codeUnit <= 0x0039) ||\n\t\t\t\t// If the character is the second character and is in the range [0-9]\n\t\t\t\t// (U+0030 to U+0039) and the first character is a `-` (U+002D), […]\n\t\t\t\t(\n\t\t\t\t\tindex == 1 &&\n\t\t\t\t\tcodeUnit >= 0x0030 && codeUnit <= 0x0039 &&\n\t\t\t\t\tfirstCodeUnit == 0x002D\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character-as-code-point\n\t\t\t\tresult += '\\\\' + codeUnit.toString(16) + ' ';\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (\n\t\t\t\t// If the character is the first character and is a `-` (U+002D), and\n\t\t\t\t// there is no second character, […]\n\t\t\t\tindex == 0 &&\n\t\t\t\tlength == 1 &&\n\t\t\t\tcodeUnit == 0x002D\n\t\t\t) {\n\t\t\t\tresult += '\\\\' + string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// If the character is not handled by one of the above rules and is\n\t\t\t// greater than or equal to U+0080, is `-` (U+002D) or `_` (U+005F), or\n\t\t\t// is in one of the ranges [0-9] (U+0030 to U+0039), [A-Z] (U+0041 to\n\t\t\t// U+005A), or [a-z] (U+0061 to U+007A), […]\n\t\t\tif (\n\t\t\t\tcodeUnit >= 0x0080 ||\n\t\t\t\tcodeUnit == 0x002D ||\n\t\t\t\tcodeUnit == 0x005F ||\n\t\t\t\tcodeUnit >= 0x0030 && codeUnit <= 0x0039 ||\n\t\t\t\tcodeUnit >= 0x0041 && codeUnit <= 0x005A ||\n\t\t\t\tcodeUnit >= 0x0061 && codeUnit <= 0x007A\n\t\t\t) {\n\t\t\t\t// the character itself\n\t\t\t\tresult += string.charAt(index);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// Otherwise, the escaped character.\n\t\t\t// https://drafts.csswg.org/cssom/#escape-a-character\n\t\t\tresult += '\\\\' + string.charAt(index);\n\n\t\t}\n\t\treturn result;\n\t};\n\n\tif (!root.CSS) {\n\t\troot.CSS = {};\n\t}\n\n\troot.CSS.escape = cssEscape;\n\treturn cssEscape;\n\n}));\n","import \"css.escape\";\n\nconst defaultOpts = {\n  // required opts\n  appOptions: null,\n  template: null,\n\n  // sometimes require opts\n  Vue: null,\n  createApp: null,\n  handleInstance: null,\n};\n\nexport default function singleSpaVue(userOpts) {\n  if (typeof userOpts !== \"object\") {\n    throw new Error(`single-spa-vue requires a configuration object`);\n  }\n\n  const opts = {\n    ...defaultOpts,\n    ...userOpts,\n  };\n\n  if (!opts.Vue && !opts.createApp) {\n    throw Error(\"single-spa-vue must be passed opts.Vue or opts.createApp\");\n  }\n\n  if (!opts.appOptions) {\n    throw Error(\"single-spa-vue must be passed opts.appOptions\");\n  }\n\n  if (\n    opts.appOptions.el &&\n    typeof opts.appOptions.el !== \"string\" &&\n    !(opts.appOptions.el instanceof HTMLElement)\n  ) {\n    throw Error(\n      `single-spa-vue: appOptions.el must be a string CSS selector, an HTMLElement, or not provided at all. Was given ${typeof opts\n        .appOptions.el}`\n    );\n  }\n\n  opts.createApp = opts.createApp || (opts.Vue && opts.Vue.createApp);\n\n  // Just a shared object to store the mounted object state\n  // key - name of single-spa app, since it is unique\n  let mountedInstances = {};\n\n  return {\n    bootstrap: bootstrap.bind(null, opts, mountedInstances),\n    mount: mount.bind(null, opts, mountedInstances),\n    unmount: unmount.bind(null, opts, mountedInstances),\n    update: update.bind(null, opts, mountedInstances),\n  };\n}\n\nfunction bootstrap(opts) {\n  if (opts.loadRootComponent) {\n    return opts.loadRootComponent().then((root) => (opts.rootComponent = root));\n  } else {\n    return Promise.resolve();\n  }\n}\n\nfunction resolveAppOptions(opts, props) {\n  if (typeof opts.appOptions === \"function\") {\n    return opts.appOptions(props);\n  }\n  return Promise.resolve({ ...opts.appOptions });\n}\n\nfunction mount(opts, mountedInstances, props) {\n  const instance = {};\n  return Promise.resolve().then(() => {\n    return resolveAppOptions(opts, props).then((appOptions) => {\n      if (props.domElement && !appOptions.el) {\n        appOptions.el = props.domElement;\n      }\n\n      let domEl;\n      if (appOptions.el) {\n        if (typeof appOptions.el === \"string\") {\n          domEl = document.querySelector(appOptions.el);\n          if (!domEl) {\n            throw Error(\n              `If appOptions.el is provided to single-spa-vue, the dom element must exist in the dom. Was provided as ${appOptions.el}`\n            );\n          }\n        } else {\n          domEl = appOptions.el;\n          if (!domEl.parentNode) {\n            throw Error(\n              `If appOptions.el is provided to single-spa-vue, the dom element must exist in the dom. Was provided as ${appOptions.el.outerHTML}`\n            );\n          }\n          if (!domEl.id) {\n            domEl.id = `single-spa-application:${props.name}`;\n          }\n        }\n      } else {\n        const htmlId = `single-spa-application:${props.name}`;\n        domEl = document.getElementById(htmlId);\n        if (!domEl) {\n          domEl = document.createElement(\"div\");\n          domEl.id = htmlId;\n          document.body.appendChild(domEl);\n        }\n      }\n\n      if (!opts.replaceMode) {\n        // single-spa-vue@>=2 always REPLACES the `el` instead of appending to it.\n        // We want domEl to stick around and not be replaced. So we tell Vue to mount\n        // into a container div inside of the main domEl\n        if (!domEl.querySelector(\".single-spa-container\")) {\n          const singleSpaContainer = document.createElement(\"div\");\n          singleSpaContainer.className = \"single-spa-container\";\n          domEl.appendChild(singleSpaContainer);\n        }\n\n        domEl = domEl.querySelector(\".single-spa-container\");\n      }\n\n      appOptions.el = domEl;\n      instance.domEl = domEl;\n\n      if (!appOptions.render && !appOptions.template && opts.rootComponent) {\n        appOptions.render = (h) => h(opts.rootComponent);\n      }\n\n      if (!appOptions.data) {\n        appOptions.data = {};\n      }\n\n      const originData = appOptions.data;\n      appOptions.data = function () {\n        const data =\n          typeof originData === \"function\"\n            ? originData.call(this, this)\n            : originData;\n        return { ...data, ...props };\n      };\n\n      if (opts.createApp) {\n        instance.vueInstance = opts.createApp(appOptions);\n        if (opts.handleInstance) {\n          return Promise.resolve(\n            opts.handleInstance(instance.vueInstance, props)\n          ).then(function () {\n            instance.root = instance.vueInstance.mount(appOptions.el);\n            mountedInstances[props.name] = instance;\n\n            return instance.vueInstance;\n          });\n        } else {\n          instance.root = instance.vueInstance.mount(appOptions.el);\n        }\n      } else {\n        instance.vueInstance = new opts.Vue(appOptions);\n        if (instance.vueInstance.bind) {\n          instance.vueInstance = instance.vueInstance.bind(\n            instance.vueInstance\n          );\n        }\n        if (opts.handleInstance) {\n          return Promise.resolve(\n            opts.handleInstance(instance.vueInstance, props)\n          ).then(function () {\n            mountedInstances[props.name] = instance;\n            return instance.vueInstance;\n          });\n        }\n      }\n\n      mountedInstances[props.name] = instance;\n\n      return instance.vueInstance;\n    });\n  });\n}\n\nfunction update(opts, mountedInstances, props) {\n  return Promise.resolve().then(() => {\n    const instance = mountedInstances[props.name];\n    const data = {\n      ...(opts.appOptions.data || {}),\n      ...props,\n    };\n    const root = instance.root || instance.vueInstance;\n    for (let prop in data) {\n      root[prop] = data[prop];\n    }\n  });\n}\n\nfunction unmount(opts, mountedInstances, props) {\n  return Promise.resolve().then(() => {\n    const instance = mountedInstances[props.name];\n    if (opts.createApp) {\n      instance.vueInstance.unmount(instance.domEl);\n    } else {\n      instance.vueInstance.$destroy();\n      instance.vueInstance.$el.innerHTML = \"\";\n    }\n    delete instance.vueInstance;\n\n    if (instance.domEl) {\n      instance.domEl.innerHTML = \"\";\n      delete instance.domEl;\n    }\n  });\n}\n"],"names":["root","global","module","exports","CSS","escape","cssEscape","value","arguments","length","TypeError","codeUnit","string","String","index","result","firstCodeUnit","charCodeAt","toString","charAt","factory","defaultOpts","appOptions","template","Vue","createApp","handleInstance","bootstrap","opts","loadRootComponent","then","rootComponent","Promise","resolve","mount","mountedInstances","props","instance","_objectSpread","resolveAppOptions","domEl","domElement","el","document","querySelector","Error","concat","parentNode","outerHTML","id","name","htmlId","getElementById","createElement","body","appendChild","replaceMode","singleSpaContainer","className","render","h","data","originData","call","this","vueInstance","bind","update","prop","unmount","$destroy","$el","innerHTML","userOpts","_typeof","HTMLElement"],"mappings":";;eACE,IAASA,IAYsBC,EAR/BC,EAAiBC,QAQ6B,SAASH,GAExD,GAAIA,EAAKI,KAAOJ,EAAKI,IAAIC,OACxB,OAAOL,EAAKI,IAAIC,OAIjB,IAAIC,EAAY,SAASC,GACxB,GAAwB,GAApBC,UAAUC,OACb,MAAM,IAAIC,UAAU,sCAQrB,IANA,IAGIC,EAHAC,EAASC,OAAON,GAChBE,EAASG,EAAOH,OAChBK,GAAS,EAETC,EAAS,GACTC,EAAgBJ,EAAOK,WAAW,KAC7BH,EAAQL,GAOA,IANhBE,EAAWC,EAAOK,WAAWH,IA2B5BC,GAbCJ,GAAY,GAAUA,GAAY,IAAuB,KAAZA,GAGpC,GAATG,GAAcH,GAAY,IAAUA,GAAY,IAIvC,GAATG,GACAH,GAAY,IAAUA,GAAY,IACjB,IAAjBK,EAIS,KAAOL,EAASO,SAAS,IAAM,IAOhC,GAATJ,GACU,GAAVL,GACY,IAAZE,KAWAA,GAAY,KACA,IAAZA,GACY,IAAZA,GACAA,GAAY,IAAUA,GAAY,IAClCA,GAAY,IAAUA,GAAY,IAClCA,GAAY,IAAUA,GAAY,KAdxB,KAAOC,EAAOO,OAAOL,GAiBrBF,EAAOO,OAAOL,GAhDxBC,GAAU,IAyDZ,OAAOA,CACT,EAOC,OALKf,EAAKI,MACTJ,EAAKI,IAAM,IAGZJ,EAAKI,IAAIC,OAASC,EACXA,CAER,CApGmBc,CAAQpB,kBCH3B,IAAMqB,EAAc,CAElBC,WAAY,KACZC,SAAU,KAGVC,IAAK,KACLC,UAAW,KACXC,eAAgB,MA8ClB,SAASC,EAAUC,GACjB,OAAIA,EAAKC,kBACAD,EAAKC,oBAAoBC,MAAK,SAAC9B,GAAI,OAAM4B,EAAKG,cAAgB/B,CAAI,IAElEgC,QAAQC,SAEnB,CASA,SAASC,EAAMN,EAAMO,EAAkBC,GACrC,IAAMC,EAAW,CAAA,EACjB,OAAOL,QAAQC,UAAUH,MAAK,WAC5B,OAVJ,SAA2BF,EAAMQ,GAC/B,MAA+B,mBAApBR,EAAKN,WACPM,EAAKN,WAAWc,GAElBJ,QAAQC,QAAOK,KAAMV,EAAKN,YACnC,CAKWiB,CAAkBX,EAAMQ,GAAON,MAAK,SAACR,GAK1C,IAAIkB,EACJ,GALIJ,EAAMK,aAAenB,EAAWoB,KAClCpB,EAAWoB,GAAKN,EAAMK,YAIpBnB,EAAWoB,GACb,GAA6B,iBAAlBpB,EAAWoB,IAEpB,KADAF,EAAQG,SAASC,cAActB,EAAWoB,KAExC,MAAMG,gHAAKC,OACiGxB,EAAWoB,SAGpH,CAEL,KADAF,EAAQlB,EAAWoB,IACRK,WACT,MAAMF,MAAKC,0GAAAA,OACiGxB,EAAWoB,GAAGM,YAGvHR,EAAMS,KACTT,EAAMS,GAAEH,0BAAAA,OAA6BV,EAAMc,MAE/C,KACK,CACL,IAAMC,EAAML,0BAAAA,OAA6BV,EAAMc,OAC/CV,EAAQG,SAASS,eAAeD,OAE9BX,EAAQG,SAASU,cAAc,QACzBJ,GAAKE,EACXR,SAASW,KAAKC,YAAYf,GAE9B,CAEA,IAAKZ,EAAK4B,YAAa,CAIrB,IAAKhB,EAAMI,cAAc,yBAA0B,CACjD,IAAMa,EAAqBd,SAASU,cAAc,OAClDI,EAAmBC,UAAY,uBAC/BlB,EAAMe,YAAYE,EACpB,CAEAjB,EAAQA,EAAMI,cAAc,wBAC9B,CAEAtB,EAAWoB,GAAKF,EAChBH,EAASG,MAAQA,EAEZlB,EAAWqC,QAAWrC,EAAWC,WAAYK,EAAKG,gBACrDT,EAAWqC,OAAS,SAACC,GAAC,OAAKA,EAAEhC,EAAKG,cAAc,GAG7CT,EAAWuC,OACdvC,EAAWuC,KAAO,IAGpB,IAAMC,EAAaxC,EAAWuC,KAS9B,GARAvC,EAAWuC,KAAO,WAKhB,OAAAvB,EAAAA,EAAYuB,CAAAA,EAHY,mBAAfC,EACHA,EAAWC,KAAKC,KAAMA,MACtBF,GACe1B,IAGnBR,EAAKH,UAAW,CAElB,GADAY,EAAS4B,YAAcrC,EAAKH,UAAUH,GAClCM,EAAKF,eACP,OAAOM,QAAQC,QACbL,EAAKF,eAAeW,EAAS4B,YAAa7B,IAC1CN,MAAK,WAIL,OAHAO,EAASrC,KAAOqC,EAAS4B,YAAY/B,MAAMZ,EAAWoB,IACtDP,EAAiBC,EAAMc,MAAQb,EAExBA,EAAS4B,WAClB,IAEA5B,EAASrC,KAAOqC,EAAS4B,YAAY/B,MAAMZ,EAAWoB,GAE1D,MAOE,GANAL,EAAS4B,YAAc,IAAIrC,EAAKJ,IAAIF,GAChCe,EAAS4B,YAAYC,OACvB7B,EAAS4B,YAAc5B,EAAS4B,YAAYC,KAC1C7B,EAAS4B,cAGTrC,EAAKF,eACP,OAAOM,QAAQC,QACbL,EAAKF,eAAeW,EAAS4B,YAAa7B,IAC1CN,MAAK,WAEL,OADAK,EAAiBC,EAAMc,MAAQb,EACxBA,EAAS4B,WAClB,IAMJ,OAFA9B,EAAiBC,EAAMc,MAAQb,EAExBA,EAAS4B,WAClB,GACF,GACF,CAEA,SAASE,EAAOvC,EAAMO,EAAkBC,GACtC,OAAOJ,QAAQC,UAAUH,MAAK,WAC5B,IAAMO,EAAWF,EAAiBC,EAAMc,MAClCW,EAAIvB,EAAAA,KACJV,EAAKN,WAAWuC,MAAQ,CAAA,GACzBzB,GAECpC,EAAOqC,EAASrC,MAAQqC,EAAS4B,YACvC,IAAK,IAAIG,KAAQP,EACf7D,EAAKoE,GAAQP,EAAKO,EAEtB,GACF,CAEA,SAASC,EAAQzC,EAAMO,EAAkBC,GACvC,OAAOJ,QAAQC,UAAUH,MAAK,WAC5B,IAAMO,EAAWF,EAAiBC,EAAMc,MACpCtB,EAAKH,UACPY,EAAS4B,YAAYI,QAAQhC,EAASG,QAEtCH,EAAS4B,YAAYK,WACrBjC,EAAS4B,YAAYM,IAAIC,UAAY,WAEhCnC,EAAS4B,YAEZ5B,EAASG,QACXH,EAASG,MAAMgC,UAAY,UACpBnC,EAASG,MAEpB,GACF,QArMe,SAAsBiC,GACnC,GAAwB,WAApBC,EAAOD,GACT,MAAM,IAAI5B,MAAK,kDAGjB,IAAMjB,EAAIU,EAAAA,EACLjB,CAAAA,EAAAA,GACAoD,GAGL,IAAK7C,EAAKJ,MAAQI,EAAKH,UACrB,MAAMoB,MAAM,4DAGd,IAAKjB,EAAKN,WACR,MAAMuB,MAAM,iDAGd,GACEjB,EAAKN,WAAWoB,IACc,iBAAvBd,EAAKN,WAAWoB,MACrBd,EAAKN,WAAWoB,cAAciC,aAEhC,MAAM9B,MAAK,kHAAAC,OAAA4B,EACgH9C,EACtHN,WAAWoB,MAIlBd,EAAKH,UAAYG,EAAKH,WAAcG,EAAKJ,KAAOI,EAAKJ,IAAIC,UAIzD,IAAIU,EAAmB,CAAA,EAEvB,MAAO,CACLR,UAAWA,EAAUuC,KAAK,KAAMtC,EAAMO,GACtCD,MAAOA,EAAMgC,KAAK,KAAMtC,EAAMO,GAC9BkC,QAASA,EAAQH,KAAK,KAAMtC,EAAMO,GAClCgC,OAAQA,EAAOD,KAAK,KAAMtC,EAAMO,GAEpC","x_google_ignoreList":[0]}