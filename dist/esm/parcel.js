import*as t from"vue";var r;function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(t)}function n(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function o(t,r,n){return(r=function(t){var r=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===e(r)?r:String(r)}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}var i=!t.version||/^[012]\..+/.test(t.version),a=(r={props:{config:[Object,Promise],wrapWith:String,wrapClass:String,wrapStyle:Object,mountParcel:Function,parcelProps:Object},render:function(r){r="function"==typeof r?r:t.h||t.default&&t.default.h;var e=this.wrapWith||"div",n={ref:"container"};return this.wrapClass&&(n.class=this.wrapClass),this.wrapStyle&&(n.style=this.wrapStyle),r(e,n)},data:function(){return{hasError:!1}},methods:{addThingToDo:function(t,r){var e=this;this.hasError&&"unmount"!==t||(this.nextThingToDo=(this.nextThingToDo||Promise.resolve()).then((function(){if(!e.unmounted||"unmount"===t){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return r.apply(e,o)}})).catch((function(r){throw e.nextThingToDo=Promise.resolve(),e.hasError=!0,r&&r.message&&(r.message="During '".concat(t,"', parcel threw an error: ").concat(r.message)),e.$emit("parcelError",r),r})))},singleSpaMount:function(){var t=this;return this.parcel=this.mountParcel(this.config,this.getParcelProps()),this.parcel.mountPromise.then((function(){t.$emit("parcelMounted")}))},singleSpaUnmount:function(){if(this.parcel&&"MOUNTED"===this.parcel.getStatus())return this.parcel.unmount()},singleSpaUpdate:function(){var t=this;if(this.parcel&&this.parcel.update)return this.parcel.update(this.getParcelProps()).then((function(){t.$emit("parcelUpdated")}))},getParcelProps:function(){return function(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?n(Object(e),!0).forEach((function(r){o(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):n(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}({domElement:this.$refs.container},this.parcelProps||{})}},mounted:function(){if(!this.config)throw Error("single-spa-vue: <parcel> component requires a config prop.");if(!this.mountParcel)throw Error("single-spa-vue: <parcel> component requires a mountParcel prop");this.config&&this.addThingToDo("mount",this.singleSpaMount)}},o(r,i?"destroyed":"unmounted",(function(){this.addThingToDo("unmount",this.singleSpaUnmount)})),o(r,"watch",{parcelProps:{handler:function(t){this.addThingToDo("update",this.singleSpaUpdate)}}}),r);export{a as default};
//# sourceMappingURL=parcel.js.map
